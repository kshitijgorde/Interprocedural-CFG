// 
// Decompiled by Procyon v0.5.30
// 

package com.stonewall.cornerstone.diff;

import org.xmodel.IChangeSet;
import org.xmodel.IModelObject;
import org.xmodel.xml.IXmlIO;
import com.stonewall.cornerstone.utility.ModelBuilder;
import junit.framework.TestCase;

public class Test extends TestCase
{
    static final String Left = "<en:policy xmlns:en=\"http://www.stonewallnetworks.com/ns/entity\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.stonewallnetworks.com/ns/entity http://schema.stonewallnetworks.com/ns/entity/policy.xsd\" id=\"6129\">    <en:name final=\"false\">encryptAllSite3ToSite4</en:name>    <en:description/>    <en:version timestamp=\"2005-06-10T11:27:15.171-04:00\">1.0</en:version>    <en:state>unimplemented</en:state>    <!-- Rule Set -->    <en:ruleSet>        <en:securityRule id=\"29\">            <en:name/>            <en:description/>            <en:type>IPSec</en:type>            <en:final>false</en:final>            <en:priority>1</en:priority>            <en:selector id=\"1\">                <en:ipHeader>                    <en:source>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <en:selector id=\"8\">                <en:ipHeader>                    <en:source>                        <en:address>0.0.0.1</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>80</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <!-- IKE SA Action -->            <en:action>                <en:ike>                <en:gateway>                    <en:local>10.168.4.2</en:local>                    <en:remote>10.168.4.1</en:remote>                </en:gateway>                    <en:exchangeMode>main</en:exchangeMode>                    <en:direction>outbound</en:direction>                    <en:phase1>                        <en:group>5</en:group>                        <en:cipher keyLength=\"256\">AES</en:cipher>                        <en:hash>SHA-1</en:hash>                        <en:authentication method=\"Pre-shared Keys\">01234567</en:authentication>                        <en:lifetime unit=\"seconds\">86400</en:lifetime>                    </en:phase1>                    <en:phase2>                        <en:type>tunnel</en:type>                        <en:transform>                            <en:esp>                                <en:cipher keyLength=\"256\">3DES</en:cipher>                                <en:hash>SHA-1</en:hash>                                <en:pfs>true</en:pfs>                            </en:esp>                        </en:transform>                        <en:group>2</en:group>                        <en:lifetime unit=\"seconds\">18000</en:lifetime>                    </en:phase2>                </en:ike>            </en:action>        </en:securityRule>    </en:ruleSet></en:policy>";
    static final String Right = "<en:policy xmlns:en=\"http://www.stonewallnetworks.com/ns/entity\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.stonewallnetworks.com/ns/entity http://schema.stonewallnetworks.com/ns/entity/policy.xsd\" id=\"6129\">    <en:name final=\"true\">jeff</en:name>    <en:description/>    <en:version timestamp=\"2005-06-10T11:27:15.171-04:00\">1.0</en:version>    <en:state>unimplemented</en:state>    <!-- Rule Set -->    <en:ruleSet>        <en:securityRule id=\"29\">            <en:name/>            <en:description/>            <en:type>IPSec</en:type>            <en:final>false</en:final>            <en:priority>1</en:priority>            <en:selector id=\"1\">                <en:ipHeader>                    <en:source>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <en:selector id=\"2\">                <en:ipHeader>                    <en:source>                        <en:address>192.168.1.1</en:address>                        <en:mask>255.255.255.0</en:mask>                        <en:port>                            <en:start>80</en:start>                            <en:end>80</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <!-- IKE SA Action -->            <en:action>                <en:ike>                <en:gateway>                    <en:local>10.168.4.2</en:local>                    <en:remote>10.168.4.1</en:remote>                </en:gateway>                    <en:exchangeMode>main</en:exchangeMode>                    <en:direction>outbound</en:direction>                    <en:phase1>                        <en:group>5</en:group>                        <en:cipher keyLength=\"256\">AES</en:cipher>                        <en:hash>SHA-1</en:hash>                        <en:authentication method=\"Pre-shared Keys\">01234567</en:authentication>                        <en:lifetime unit=\"seconds\">86400</en:lifetime>                    </en:phase1>                    <en:phase2>                        <en:type>tunnel</en:type>                        <en:transform>                            <en:esp>                                <en:cipher keyLength=\"256\">3DES</en:cipher>                                <en:hash>SHA-1</en:hash>                                <en:pfs>true</en:pfs>                            </en:esp>                        </en:transform>                        <en:group>2</en:group>                        <en:lifetime unit=\"seconds\">18000</en:lifetime>                    </en:phase2>                </en:ike>            </en:action>        </en:securityRule>    </en:ruleSet></en:policy>";
    
    public void testOrdered() {
        try {
            final ModelBuilder builder = new ModelBuilder();
            final IModelObject left = builder.buildModel("<en:policy xmlns:en=\"http://www.stonewallnetworks.com/ns/entity\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.stonewallnetworks.com/ns/entity http://schema.stonewallnetworks.com/ns/entity/policy.xsd\" id=\"6129\">    <en:name final=\"false\">encryptAllSite3ToSite4</en:name>    <en:description/>    <en:version timestamp=\"2005-06-10T11:27:15.171-04:00\">1.0</en:version>    <en:state>unimplemented</en:state>    <!-- Rule Set -->    <en:ruleSet>        <en:securityRule id=\"29\">            <en:name/>            <en:description/>            <en:type>IPSec</en:type>            <en:final>false</en:final>            <en:priority>1</en:priority>            <en:selector id=\"1\">                <en:ipHeader>                    <en:source>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <en:selector id=\"8\">                <en:ipHeader>                    <en:source>                        <en:address>0.0.0.1</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>80</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <!-- IKE SA Action -->            <en:action>                <en:ike>                <en:gateway>                    <en:local>10.168.4.2</en:local>                    <en:remote>10.168.4.1</en:remote>                </en:gateway>                    <en:exchangeMode>main</en:exchangeMode>                    <en:direction>outbound</en:direction>                    <en:phase1>                        <en:group>5</en:group>                        <en:cipher keyLength=\"256\">AES</en:cipher>                        <en:hash>SHA-1</en:hash>                        <en:authentication method=\"Pre-shared Keys\">01234567</en:authentication>                        <en:lifetime unit=\"seconds\">86400</en:lifetime>                    </en:phase1>                    <en:phase2>                        <en:type>tunnel</en:type>                        <en:transform>                            <en:esp>                                <en:cipher keyLength=\"256\">3DES</en:cipher>                                <en:hash>SHA-1</en:hash>                                <en:pfs>true</en:pfs>                            </en:esp>                        </en:transform>                        <en:group>2</en:group>                        <en:lifetime unit=\"seconds\">18000</en:lifetime>                    </en:phase2>                </en:ike>            </en:action>        </en:securityRule>    </en:ruleSet></en:policy>");
            final IModelObject right = builder.buildModel("<en:policy xmlns:en=\"http://www.stonewallnetworks.com/ns/entity\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.stonewallnetworks.com/ns/entity http://schema.stonewallnetworks.com/ns/entity/policy.xsd\" id=\"6129\">    <en:name final=\"true\">jeff</en:name>    <en:description/>    <en:version timestamp=\"2005-06-10T11:27:15.171-04:00\">1.0</en:version>    <en:state>unimplemented</en:state>    <!-- Rule Set -->    <en:ruleSet>        <en:securityRule id=\"29\">            <en:name/>            <en:description/>            <en:type>IPSec</en:type>            <en:final>false</en:final>            <en:priority>1</en:priority>            <en:selector id=\"1\">                <en:ipHeader>                    <en:source>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <en:selector id=\"2\">                <en:ipHeader>                    <en:source>                        <en:address>192.168.1.1</en:address>                        <en:mask>255.255.255.0</en:mask>                        <en:port>                            <en:start>80</en:start>                            <en:end>80</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <!-- IKE SA Action -->            <en:action>                <en:ike>                <en:gateway>                    <en:local>10.168.4.2</en:local>                    <en:remote>10.168.4.1</en:remote>                </en:gateway>                    <en:exchangeMode>main</en:exchangeMode>                    <en:direction>outbound</en:direction>                    <en:phase1>                        <en:group>5</en:group>                        <en:cipher keyLength=\"256\">AES</en:cipher>                        <en:hash>SHA-1</en:hash>                        <en:authentication method=\"Pre-shared Keys\">01234567</en:authentication>                        <en:lifetime unit=\"seconds\">86400</en:lifetime>                    </en:phase1>                    <en:phase2>                        <en:type>tunnel</en:type>                        <en:transform>                            <en:esp>                                <en:cipher keyLength=\"256\">3DES</en:cipher>                                <en:hash>SHA-1</en:hash>                                <en:pfs>true</en:pfs>                            </en:esp>                        </en:transform>                        <en:group>2</en:group>                        <en:lifetime unit=\"seconds\">18000</en:lifetime>                    </en:phase2>                </en:ike>            </en:action>        </en:securityRule>    </en:ruleSet></en:policy>");
            final AnnotatingXmlDiffer diff = new AnnotatingXmlDiffer();
            diff.diffAndApply(left, right);
            final String s = builder.writeModel(left, IXmlIO.Style.printable);
            System.out.println(s);
        }
        catch (Exception e) {
            System.err.println(e);
            e.printStackTrace(System.err);
        }
    }
    
    public void testEquals() {
        try {
            final ModelBuilder builder = new ModelBuilder();
            final IModelObject left = builder.buildModel("<en:policy xmlns:en=\"http://www.stonewallnetworks.com/ns/entity\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.stonewallnetworks.com/ns/entity http://schema.stonewallnetworks.com/ns/entity/policy.xsd\" id=\"6129\">    <en:name final=\"false\">encryptAllSite3ToSite4</en:name>    <en:description/>    <en:version timestamp=\"2005-06-10T11:27:15.171-04:00\">1.0</en:version>    <en:state>unimplemented</en:state>    <!-- Rule Set -->    <en:ruleSet>        <en:securityRule id=\"29\">            <en:name/>            <en:description/>            <en:type>IPSec</en:type>            <en:final>false</en:final>            <en:priority>1</en:priority>            <en:selector id=\"1\">                <en:ipHeader>                    <en:source>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <en:selector id=\"8\">                <en:ipHeader>                    <en:source>                        <en:address>0.0.0.1</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>80</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <!-- IKE SA Action -->            <en:action>                <en:ike>                <en:gateway>                    <en:local>10.168.4.2</en:local>                    <en:remote>10.168.4.1</en:remote>                </en:gateway>                    <en:exchangeMode>main</en:exchangeMode>                    <en:direction>outbound</en:direction>                    <en:phase1>                        <en:group>5</en:group>                        <en:cipher keyLength=\"256\">AES</en:cipher>                        <en:hash>SHA-1</en:hash>                        <en:authentication method=\"Pre-shared Keys\">01234567</en:authentication>                        <en:lifetime unit=\"seconds\">86400</en:lifetime>                    </en:phase1>                    <en:phase2>                        <en:type>tunnel</en:type>                        <en:transform>                            <en:esp>                                <en:cipher keyLength=\"256\">3DES</en:cipher>                                <en:hash>SHA-1</en:hash>                                <en:pfs>true</en:pfs>                            </en:esp>                        </en:transform>                        <en:group>2</en:group>                        <en:lifetime unit=\"seconds\">18000</en:lifetime>                    </en:phase2>                </en:ike>            </en:action>        </en:securityRule>    </en:ruleSet></en:policy>");
            final IModelObject right = builder.buildModel("<en:policy xmlns:en=\"http://www.stonewallnetworks.com/ns/entity\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.stonewallnetworks.com/ns/entity http://schema.stonewallnetworks.com/ns/entity/policy.xsd\" id=\"6129\">    <en:name final=\"true\">jeff</en:name>    <en:description/>    <en:version timestamp=\"2005-06-10T11:27:15.171-04:00\">1.0</en:version>    <en:state>unimplemented</en:state>    <!-- Rule Set -->    <en:ruleSet>        <en:securityRule id=\"29\">            <en:name/>            <en:description/>            <en:type>IPSec</en:type>            <en:final>false</en:final>            <en:priority>1</en:priority>            <en:selector id=\"1\">                <en:ipHeader>                    <en:source>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <en:selector id=\"2\">                <en:ipHeader>                    <en:source>                        <en:address>192.168.1.1</en:address>                        <en:mask>255.255.255.0</en:mask>                        <en:port>                            <en:start>80</en:start>                            <en:end>80</en:end>                        </en:port>                    </en:source>                    <en:destination>                        <en:address>0.0.0.0</en:address>                        <en:mask>0.0.0.0</en:mask>                        <en:port>                            <en:start>0</en:start>                            <en:end>0</en:end>                        </en:port>                    </en:destination>                    <en:protocol/>                </en:ipHeader>            </en:selector>            <!-- IKE SA Action -->            <en:action>                <en:ike>                <en:gateway>                    <en:local>10.168.4.2</en:local>                    <en:remote>10.168.4.1</en:remote>                </en:gateway>                    <en:exchangeMode>main</en:exchangeMode>                    <en:direction>outbound</en:direction>                    <en:phase1>                        <en:group>5</en:group>                        <en:cipher keyLength=\"256\">AES</en:cipher>                        <en:hash>SHA-1</en:hash>                        <en:authentication method=\"Pre-shared Keys\">01234567</en:authentication>                        <en:lifetime unit=\"seconds\">86400</en:lifetime>                    </en:phase1>                    <en:phase2>                        <en:type>tunnel</en:type>                        <en:transform>                            <en:esp>                                <en:cipher keyLength=\"256\">3DES</en:cipher>                                <en:hash>SHA-1</en:hash>                                <en:pfs>true</en:pfs>                            </en:esp>                        </en:transform>                        <en:group>2</en:group>                        <en:lifetime unit=\"seconds\">18000</en:lifetime>                    </en:phase2>                </en:ike>            </en:action>        </en:securityRule>    </en:ruleSet></en:policy>");
            final AnnotatingXmlDiffer diff = new AnnotatingXmlDiffer();
            System.out.println(diff.diff(left, right, null));
            System.out.println(diff.diff(left, left, null));
        }
        catch (Exception e) {
            System.err.println(e);
            e.printStackTrace(System.err);
        }
    }
}
